(()=>{(()=>{let{__:m,_x:T,_n:P,_nx:H}=wp.i18n;_(),h();function h(){let r=document.querySelectorAll(".mc-main, .mc-event-list");r&&r.forEach(e=>{let a=e.getAttribute("id");v(a),e.classList.remove("mcjs")})}let b=document.querySelectorAll(".mc-loader");b&&b.forEach(r=>{let e=r.closest("ul");e.setAttribute("tabindex","-1"),e.addEventListener("click",function(a){let c=a.target.closest("button");c&&c.classList.contains("mc-loader")&&L(c,e)})});function L(r,e){let a=new XMLHttpRequest;a.open("POST",my_calendar.ajaxurl,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),a.onload=function(){if(this.status>=200&&this.status<400){let n=JSON.parse(this.response);e.querySelectorAll("li").forEach(t=>t.remove()),e.innerHTML+=n.response,e.focus(),wp.a11y.speak(m("Upcoming events loaded","my-calendar"))}else e.innerHTML+="<li>"+m("Upcoming Events failed to load","my-calendar")+"</li>",wp.a11y.speak(m("Upcoming Events failed to load","my-calendar"))},a.onerror=function(){};let c=r.value,l=r.getAttribute("data-value");type=c==="dates"?"dates":"time",a.send("action="+my_calendar.action+"&behavior=loadupcoming&"+type+"="+c+"&args="+l)}w(),q(),S(),my_calendar.ajax==="true"&&g();function g(){document.querySelectorAll(".my-calendar-header a:not(.mc-print a, .mc-export a), .my-calendar-footer a:not(.mc-print a, .mc-export a)").forEach(a=>{a.addEventListener("keydown",function(c){c.key===" "&&c.preventDefault()})}),document.querySelectorAll(".my-calendar-header a:not(.mc-print a, .mc-export a), .my-calendar-footer a:not(.mc-print a, .mc-export a), .my-calendar-header input[type=submit], .my-calendar-footer input[type=submit], .my-calendar-header button:not(.mc-export button), .my-calendar-footer button:not(.mc-export button)").forEach(a=>{a.addEventListener("click",function(c){A(c,a)}),a.addEventListener("keyup",function(c){A(c,a)})})}function A(r,e){if(r.preventDefault(),r.type==="click"||r.type==="keyup"&&r.key===" "){let a=e.closest(".mc-main");a.classList.remove("is-main-view");let c=e.getAttribute("id"),l=a.getAttribute("id"),n,t,i,p,y,f,u,d,s;if(e.nodeName==="INPUT"||e.nodeName==="BUTTON"){let o=e.closest("form");o.classList.contains("mc-date-switcher")&&(n=o.querySelector("select[name=month]").value,t=o.querySelector("select[name=dy]").value,i=o.querySelector("select[name=yr]").value),o.classList.contains("mc-categories-switcher")&&(p=o.querySelector("select[name=mcat]").value),o.classList.contains("mc-locations-switcher")&&(y=o.querySelector("select[name=loc]").value),o.classList.contains("mc-access-switcher")&&(f=o.querySelector("select[name=access]").value),u=o.querySelector("input[name=mcs]").value,d=e.getAttribute("data-href")}else d=e.getAttribute("href");try{s=new URL(d),s.searchParams.delete("embed"),s.searchParams.delete("source"),(e.nodeName==="INPUT"||e.nodeName==="BUTTON")&&(n!==""&&(s.searchParams.delete("month"),s.searchParams.delete("dy"),s.searchParams.delete("yr"),s.searchParams.append("month",parseInt(n)),typeof t<"u"&&s.searchParams.append("dy",parseInt(t)),s.searchParams.append("yr",parseInt(i))),p!==""&&(s.searchParams.delete("mcat"),s.searchParams.append("mcat",p)),y!==""&&(s.searchParams.delete("loc"),s.searchParams.delete("ltype"),s.searchParams.append("ltype","id"),s.searchParams.append("loc",y)),f!==""&&(s.searchParams.delete("access"),s.searchParams.append("access",parseInt(f))),s.searchParams.delete("mcs"),u!==""&&typeof u<"u"&&s.searchParams.append("mcs",encodeURIComponent(u)),d=s.toString()),window.history.pushState({},"",s)}catch(o){s=!1}a.insertAdjacentHTML("afterbegin",'<div class="mc-loading"></div><div class="loading"><span class="screen-reader-text">Loading...</span></div>'),wp.a11y.speak(m("Loading","my-calendar")),fetch(d).then(o=>{if(o.ok)return o.text()}).then(o=>{let k=new DOMParser().parseFromString(o,"text/html");a.replaceWith(k.querySelector("#"+l)),E(c,l)}).catch(o=>{a.insertAdjacentHTML("beforebegin",o)})}}function E(r,e){if(h(),typeof my_calendar<"u"&&my_calendar.list=="true"){let l;my_calendar.links==="false"?(l=document.querySelectorAll("li.mc-events"),l.forEach(n=>{let t=n.querySelector(".mc-events");n.classList.contains("current-day")||(t.style.display="none")})):(l=document.querySelectorAll("li.mc-events .single-details"),l.forEach(n=>{n.style.display="none"}))}typeof my_calendar<"u"&&my_calendar.grid=="true"&&document.querySelectorAll(".mc-main.calendar .has-events > .calendar-event > *:not(header)").forEach(n=>{n.style.display="none"}),typeof my_calendar<"u"&&my_calendar.mini=="true"&&document.querySelectorAll(".mc-main.mini .has-events .calendar-events").forEach(n=>{n.style.display="none"}),S(),w(),q(),document.getElementById(r).focus();let c=document.getElementById("mc_head_"+e);wp.a11y.speak(c.innerText),_(),v(e),g(),x()}function _(){let r=document.querySelectorAll(".mc-user-time"),e=new Intl.DateTimeFormat().resolvedOptions().timeZone,a,c;r.forEach(l=>{let n=l.innerText,t=l.getAttribute("data-type");e===void 0&&(e=l.getAttribute("data-label")),t==="datetime"&&(c='<span class="mc-local-time-time">'+new Date(n).toLocaleTimeString().replace(":00 "," ")+"</span>",a='<span class="mc-local-time-date">'+new Date(n).toLocaleDateString()+"</span>",l.innerHTML='<span class="mc-local-time-label">'+e+":</span> "+a+'<span class="sep">, </span>'+c),t==="date"&&(a='<span class="mc-local-time-date">'+new Date(n).toLocaleDateString()+"</span>",l.innerHTML='<span class="mc-local-time-label">'+e+":</span> "+a),t==="time"&&(c='<span class="mc-local-time-time">'+new Date(n).toLocaleTimeString().replace(":00 "," ")+"</span>",l.innerHTML='<span class="mc-local-time-label">'+e+":</span> "+c),l.setAttribute("data-time",n)})}function S(){document.querySelectorAll(".my-calendar-header a:not(.mc-print a, .mc-export a), .my-calendar-footer a:not(.mc-print a, .mc-export a)").forEach(e=>{e.setAttribute("role","button")})}function v(r){if(r){let e=document.querySelector("#"+r+" .mc-subscribe"),a=document.querySelector("#"+r+" .mc-download");if(e!==null){let n="mc_control_"+Math.floor(Math.random()*1e3).toString(),t=document.createElement("button");t.setAttribute("type","button"),t.setAttribute("aria-controls",n),t.setAttribute("aria-expanded",!1),t.innerHTML=my_calendar.subscribe+' <span class="dashicons dashicons-arrow-right" aria-hidden="true"></span>',e.querySelector("ul").setAttribute("id",n),e.querySelector("ul").style.display="none",e.insertAdjacentElement("afterbegin",t)}if(a!==null){let n="mc_control_"+Math.floor(Math.random()*1e3).toString(),t=document.createElement("button");t.setAttribute("type","button"),t.setAttribute("aria-controls",n),t.setAttribute("aria-expanded",!1),t.innerHTML=my_calendar.export+' <span class="dashicons dashicons-arrow-right" aria-hidden="true"></span>',a.querySelector("ul").setAttribute("id",n),a.querySelector("ul").style.display="none",a.insertAdjacentElement("afterbegin",t)}let c=document.querySelectorAll("#"+r+" .mc-export button"),l;c.forEach(n=>{n.addEventListener("click",function(){let t=n.getAttribute("aria-controls"),i=document.getElementById(t);i.checkVisibility()?(i.style.display="none",n.setAttribute("aria-expanded","false"),l=n.querySelector(".dashicons"),l.classList.remove("dashicons-arrow-down"),l.classList.add("dashicons-arrow-right")):(i.style.display="block",n.setAttribute("aria-expanded","true"),l=n.querySelector(".dashicons"),l.classList.remove("dashicons-arrow-right"),l.classList.add("dashicons-arrow-down"))})})}}function w(){document.querySelectorAll(".mc-main a[target=_blank]").forEach(e=>{e.classList.add("mc-opens-in-new-tab"),e.insertAdjacentHTML("beforeend",' <span class="dashicons dashicons-external" aria-hidden="true"></span><span class="screen-reader-text"> '+my_calendar.newWindow+"</span>")})}function q(){let r=document.querySelectorAll(".mc-toggle-edit");r&&r.forEach(e=>{let a=e.getAttribute("aria-controls"),c=document.querySelector("#"+a);e.addEventListener("click",function(l){let n=e.offsetWidth+8;c.style.left=n+"px",e.getAttribute("aria-expanded")==="true"?(c.style.display="none",e.setAttribute("aria-expanded","false")):(c.style.display="block",e.setAttribute("aria-expanded","true"))})})}function x(){try{let r=document.querySelectorAll(".mc-main.calendar table.my-calendar-table"),e=document.querySelectorAll(".mc-main.calendar table.my-calendar-table thead, .mc-main.calendar table.my-calendar-table tbody, .mc-main.calendar table.my-calendar-table tfoot"),a=document.querySelectorAll(".mc-main.calendar table.my-calendar-table tr"),c=document.querySelectorAll(".mc-main.calendar table.my-calendar-table td"),l=document.querySelectorAll(".mc-main.calendar table.my-calendar-table th"),n=document.querySelectorAll(".mc-main.calendar table.my-calendar-table th[scope=row]");for(let t=0;t<r.length;t++)r[t].setAttribute("role","table");for(let t=0;t<e.length;t++)e[t].setAttribute("role","rowgroup");for(let t=0;t<a.length;t++)a[t].setAttribute("role","row");for(let t=0;t<c.length;t++)c[t].setAttribute("role","cell");for(let t=0;t<l.length;t++)l[t].setAttribute("role","columnheader");for(let t=0;t<n.length;t++)n[t].setAttribute("role","rowheader")}catch(r){console.log("my_calendar_table_aria(): "+r)}}x()})();})();
