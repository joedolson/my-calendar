"use strict";!function(e){var t="mc-modal",a="data-modal-background-click",d="data-modal-prefix-class",n="data-modal-text",o="data-modal-content-id",l="data-modal-describedby-id",r="data-modal-title",i="data-modal-focus-toid",s="data-modal-close-text",c="mc-modal-close",u="mc-modal-close",m="data-content-back-id",b="data-focus-back",f="mc-modal-content",g="modal-title",A="mc-modal-page",v="mc-modal",p="mc-modal-overlay",h="Close modal",C="data-background-click",y="mc-no-scroll",E="aria-hidden",k=function findById(t){return e.getElementById(t)},x=function removeClass(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},I=function hasClass(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)};function remove(e){e.parentNode.removeChild(e)}var L=function searchParent(e,t){for(var a=!1,d=e.parentNode;d&&!1===a;)!0===I(d,t)?a=!0:d=d.parentNode;return!0===a?d.getAttribute("id"):""},B=function closeModal(e){if(""!==e.modalFocusBackId){var t=k(e.modalFocusBackId).closest(".mc-events");t&&t.insertAdjacentElement("beforeEnd",e.modalContent.firstChild)}if(remove(e.modal),remove(e.overlay),e.modalFocusBackId){var a=k(e.modalFocusBackId);a&&a.focus()}},j=function attach(j){var T=arguments.length<=1||void 0===arguments[1]||arguments[1];(function $listModals(){var a=arguments.length<=0||void 0===arguments[0]?e:arguments[0];return[].slice.call(a.querySelectorAll("."+t))})(j).forEach((function(t){var a=Math.random().toString(32).slice(2,12),d=k(A),n=e.querySelector("body");if(t.setAttribute("id","label_modal_"+a),t.setAttribute("aria-haspopup","dialog"),null===d||0===d.length){var o=e.createElement("DIV");o.setAttribute("id",A),function wrapInner(e,t){for("string"==typeof t&&(t=document.createElement(t)),e.appendChild(t);e.firstChild!==t;)t.appendChild(e.firstChild)}(n,o),d=o}})),T&&["click","keydown"].forEach((function(j){e.body.addEventListener(j,(function(T){var M=L(T.target,t);if((!0===I(T.target,t)||""!==M)&&"click"===j){var w=e.querySelector("body"),D=""!==M?k(M):T.target,F=!0===D.hasAttribute(d)?D.getAttribute(d)+"-":"",P=!0===D.hasAttribute(n)?D.getAttribute(n):"",_=!0===D.hasAttribute(o)?D.getAttribute(o):"",N=!0===D.hasAttribute(l)?D.getAttribute(l):"",S=!0===D.hasAttribute(r)?D.getAttribute(r):"",q=!0===D.hasAttribute(s)?D.getAttribute(s):h,O=!0===D.hasAttribute(a)?D.getAttribute(a):"",H=!0===D.hasAttribute(i)?D.getAttribute(i):"",$=k(A);w.insertAdjacentHTML("beforeEnd",function createOverlay(e){var t=p,a=e.text||h,d=e.prefixClass+"modal-overlay",n="disabled"===e.backgroundEnabled?"disabled":"enabled";return'<span\n                    id="'+t+'"\n                    class="'+d+'"\n                    '+C+'="'+n+'"\n                    title="'+a+'"\n                    >\n                    <span class="invisible">'+a+"</span>\n                  </span>"}({text:q,backgroundEnabled:O,prefixClass:F})),w.insertAdjacentElement("beforeEnd",function createModal(e){var t=document.createElement("dialog"),a=document.createElement("div"),d=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div");n.setAttribute("id",f),o.classList.add("mc-modal-title-container");var l=v,r=e.modalPrefixClass+"modal",i=e.modalPrefixClass+"modal__wrapper",s=e.modalPrefixClass+"modal-close",A='<span class="'+e.modalPrefixClass+'modal-close__text">\n                                          '+e.modalCloseText+"\n                                         </span>",p=e.modalPrefixClass+"modal__content",h=e.modalPrefixClass+"modal-title",C=""!==e.modalTitle?'<h1 id="'+g+'" class="'+h+'">\n                                          '+e.modalTitle+"\n                                         </h1>":"",y='<button type="button" class="'+u+" "+s+'" id="'+c+'" '+m+'="'+e.modalContentId+'" '+b+'="'+e.modalFocusBackId+'"><span class="dashicons dashicons-no" aria-hidden="true"></span>\n                               '+A+"\n                              </button>",E=e.modalText;if(""===E&&e.modalContentId){var x=k(e.modalContentId);x&&n.insertAdjacentElement("beforeEnd",x)}else n.insertAdjacentHTML("beforeEnd",E);return t.setAttribute("id",l),t.classList.add(r),t.setAttribute("role","dialog"),t.setAttribute("aria-describedby",e.modalDescribedById+" open"),t.setAttribute("aria-labelledby",g),a.setAttribute("role","document"),a.classList.add(i),o.insertAdjacentHTML("afterBegin",C),o.insertAdjacentHTML("afterBegin",y),d.classList.add(p),d.insertAdjacentElement("afterbegin",o),d.insertAdjacentElement("beforeEnd",n),a.insertAdjacentElement("afterBegin",d),t.insertAdjacentElement("afterBegin",a),t}({modalText:P,modalPrefixClass:F,backgroundEnabled:_,modalTitle:S,modalCloseText:q,modalCloseTitle:q,modalContentId:_,modalDescribedById:N,modalFocusBackId:D.getAttribute("id")})),$.setAttribute(E,"true"),function addClass(e,t){e.classList?e.classList.add(t):e.className+=" "+t}(w,y);var R=k(c);if(""!==H){var K=k(H);K?K.focus():R.focus()}else R.focus();T.preventDefault()}var V=L(T.target,u);if((T.target.getAttribute("id")===c||""!==V||T.target.getAttribute("id")===p||!0===I(T.target,u))&&"click"===j){w=e.querySelector("body"),$=k(A);var W=k(v),z=k(f)?k(f):"",G=k(p),J=(U=k(c)).getAttribute(b),Q=U.getAttribute(m);O=G.getAttribute(C);T.target.getAttribute("id")===p&&"disabled"===O||(B({modal:W,modalContent:z,overlay:G,modalFocusBackId:J,contentBackId:Q,backgroundEnabled:O,fromId:T.target.getAttribute("id")}),$.removeAttribute(E),x(w,y))}if(k(v)&&"keydown"===j){w=e.querySelector("body"),$=k(A),W=k(v),z=k(f)?k(f):"",G=k(p),J=(U=k(c)).getAttribute(b),Q=U.getAttribute(m);var U,X=[].slice.call(W.querySelectorAll("a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]"));27===T.keyCode&&(B({modal:W,modalContent:z,overlay:G,modalFocusBackId:J,contentBackId:Q}),$.removeAttribute(E),x(w,y)),9===T.keyCode&&X.indexOf(T.target)>=0&&(T.shiftKey?T.target===X[0]&&(X[X.length-1].focus(),T.preventDefault()):T.target===X[X.length-1]&&(X[0].focus(),T.preventDefault())),9===T.keyCode&&-1===X.indexOf(T.target)&&(T.preventDefault(),X[0].focus())}}),!0)}))};document.addEventListener("DOMContentLoaded",(function onLoad(){j(),document.removeEventListener("DOMContentLoaded",onLoad)})),window.accessibleModalWindowAria=j}(document);