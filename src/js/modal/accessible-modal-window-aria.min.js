"use strict";!function(E){function k(t){return E.getElementById(t)}function x(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function j(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}var I="js-modal",L="data-modal-background-click",B="data-modal-prefix-class",T="data-modal-text",D="data-modal-content-id",w="data-modal-describedby-id",F="data-modal-title",M="data-modal-focus-toid",_="data-modal-close-text",N="js-modal-close",P="js-modal-close",S="data-content-back-id",q="data-focus-back",H="js-modal-content",O="modal-title",R="js-modal-page",$="js-modal",K="js-modal-overlay",V="Close modal",W="data-background-click",z="mc-no-scroll",G="aria-hidden";function a(t){t.parentNode.removeChild(t)}function J(t,e){for(var a=!1,d=t.parentNode;d&&!1===a;)!0===j(d,e)?a=!0:d=d.parentNode;return!0===a?d.getAttribute("id"):""}function Q(t){var e;""===t.modalFocusBackId||(e=k(t.modalFocusBackId).closest(".mc-events"))&&e.insertAdjacentElement("beforeEnd",t.modalContent.firstChild),a(t.modal),a(t.overlay),!t.modalFocusBackId||(t=k(t.modalFocusBackId))&&t.focus()}function t(t){var e=arguments.length<=1||void 0===arguments[1]||arguments[1];(function(){var t=arguments.length<=0||void 0===arguments[0]?E:arguments[0];return[].slice.call(t.querySelectorAll("."+I))})(t).forEach(function(t){var e=Math.random().toString(32).slice(2,12),a=k(R),d=E.querySelector("body");t.setAttribute("id","label_modal_"+e),t.setAttribute("aria-haspopup","dialog"),null!==a&&0!==a.length||((t=E.createElement("DIV")).setAttribute("id",R),function(t,e){for("string"==typeof e&&(e=document.createElement(e)),t.appendChild(e);t.firstChild!==e;)e.appendChild(t.firstChild)}(d,t),a=t)}),e&&["click","keydown"].forEach(function(C){E.body.addEventListener(C,function(t){var e,a,d,o,n,l,i,r,s,c=J(t.target,I);!0!==j(t.target,I)&&""===c||"click"!==C||(m=E.querySelector("body"),e=!0===(i=""!==c?k(c):t.target).hasAttribute(B)?i.getAttribute(B)+"-":"",a=!0===i.hasAttribute(T)?i.getAttribute(T):"",d=!0===i.hasAttribute(D)?i.getAttribute(D):"",y=!0===i.hasAttribute(w)?i.getAttribute(w):"",o=!0===i.hasAttribute(F)?i.getAttribute(F):"",n=!0===i.hasAttribute(_)?i.getAttribute(_):V,u=!0===i.hasAttribute(L)?i.getAttribute(L):"",l=!0===i.hasAttribute(M)?i.getAttribute(M):"",b=k(R),m.insertAdjacentHTML("beforeEnd",(s=(r={text:n,backgroundEnabled:u,prefixClass:e}).text||V,c=r.prefixClass+"modal-overlay",r="disabled"===r.backgroundEnabled?"disabled":"enabled",'<span\n                    id="js-modal-overlay"\n                    class="'+c+'"\n                    '+W+'="'+r+'"\n                    title="'+s+'"\n                    >\n                    <span class="invisible">'+s+"</span>\n                  </span>")),m.insertAdjacentElement("beforeEnd",function(t){var e=document.createElement("dialog"),a=document.createElement("div"),d=document.createElement("div"),o=document.createElement("div");o.setAttribute("id",H);var n=t.modalPrefixClass+"modal",l=t.modalPrefixClass+"modal__wrapper",i=t.modalPrefixClass+"modal-close",r='<span class="'+t.modalPrefixClass+'modal-close__text">\n                                          '+t.modalCloseText+"\n                                         </span>",s=t.modalPrefixClass+"modal__content",c=t.modalPrefixClass+"modal-title",u=""!==t.modalTitle?'<div class="js-modal-title-container"><h1 id="'+O+'" class="'+c+'">\n                                          '+t.modalTitle+"\n                                         </h1></div>":"",c='<button type="button" class="'+P+" "+i+'" id="'+N+'" '+S+'="'+t.modalContentId+'" '+q+'="'+t.modalFocusBackId+'"><span class="dashicons dashicons-no" aria-hidden="true"></span>\n                               '+r+"\n                              </button>",i=t.modalText;return""===i&&t.modalContentId?(r=k(t.modalContentId))&&o.insertAdjacentElement("beforeEnd",r):o.insertAdjacentHTML("beforeEnd",i),e.setAttribute("id","js-modal"),e.classList.add(n),e.setAttribute("role","dialog"),e.setAttribute("aria-describedby",t.modalDescribedById+" open"),e.setAttribute("aria-labelledby",O),a.setAttribute("role","document"),a.classList.add(l),a.insertAdjacentHTML("afterBegin",c),d.classList.add(s),d.insertAdjacentHTML("afterBegin",u),d.insertAdjacentElement("beforeEnd",o),a.insertAdjacentElement("afterBegin",d),e.insertAdjacentElement("afterBegin",a),e}({modalText:a,modalPrefixClass:e,backgroundEnabled:d,modalTitle:o,modalCloseText:n,modalCloseTitle:n,modalContentId:d,modalDescribedById:y,modalFocusBackId:i.getAttribute("id")})),b.setAttribute(G,"true"),y=z,(i=m).classList?i.classList.add(y):i.className+=" "+y,y=k(N),(""!==l&&k(l)||y).focus(),t.preventDefault());var u,m,b,f,g,A,p,v,h,y=J(t.target,P);t.target.getAttribute("id")!==N&&""===y&&t.target.getAttribute("id")!==K&&!0!==j(t.target,P)||"click"!==C||(m=E.querySelector("body"),b=k(R),f=k($),g=k(H)?k(H):"",A=k(K),p=(h=k(N)).getAttribute(q),v=h.getAttribute(S),u=A.getAttribute(W),t.target.getAttribute("id")===K&&"disabled"===u||(Q({modal:f,modalContent:g,overlay:A,modalFocusBackId:p,contentBackId:v,backgroundEnabled:u,fromId:t.target.getAttribute("id")}),b.removeAttribute(G),x(m,z))),k($)&&"keydown"===C&&(m=E.querySelector("body"),b=k(R),f=k($),g=k(H)?k(H):"",A=k(K),p=(h=k(N)).getAttribute(q),v=h.getAttribute(S),h=[].slice.call(f.querySelectorAll("a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]")),27===t.keyCode&&(Q({modal:f,modalContent:g,overlay:A,modalFocusBackId:p,contentBackId:v}),b.removeAttribute(G),x(m,z)),9===t.keyCode&&0<=h.indexOf(t.target)&&(t.shiftKey?t.target===h[0]&&(h[h.length-1].focus(),t.preventDefault()):t.target===h[h.length-1]&&(h[0].focus(),t.preventDefault())),9===t.keyCode&&-1===h.indexOf(t.target)&&(t.preventDefault(),h[0].focus()))},!0)})}function e(){t(),document.removeEventListener("DOMContentLoaded",e)}document.addEventListener("DOMContentLoaded",e),window.accessibleModalWindowAria=t}(document);